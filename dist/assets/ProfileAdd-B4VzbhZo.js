import{k as Q,p as R,a as W,q,x as O,c as r,b as n,d as t,e as g,h as b,v as c,g as o,n as y,i as h,F as S,f as U,t as a,E as H,y as V,z as J,j as N,w as K}from"./index-DV1n7CJL.js";import{u as X,a as Y}from"./useProfiles-CzZQSzFl.js";import{Q as Z}from"./qrcode.vue.esm-DMXmGWbm.js";const ee={class:"max-w-2xl mx-auto"},te={class:"form-control"},se={key:0,class:"label"},oe={class:"form-control"},le={class:"form-control"},re={class:"form-control"},ne=["onUpdate:modelValue","onInput"],ae={key:1,class:"content-center input flex-[1] max-w-[150px] bg-base-200"},ie=["onUpdate:modelValue","placeholder","onInput"],de=["onClick"],ue={class:"flex gap-2 mt-2 flex-wrap"},pe={class:"flex gap-2 mt-4 items-center"},be=["value"],ce=["disabled"],me={class:"mt-10"},ve={class:"card bg-base-100 border-base-200 border rounded-xl"},fe={class:"card-body flex flex-col md:flex-row md:justify-between md:items-end gap-4"},xe={class:"flex-1"},ge={class:"card-title truncate"},ye={class:"text-gray-600 text-sm truncate"},he={class:"flex flex-col items-end gap-2"},ke={class:"text-primary font-mono text-xs truncate"},we={class:"w-36 h-36"},_e={class:"flex gap-4 justify-end mt-6"},Te=["disabled"],Ce={key:0,class:"loading loading-spinner"},Le={key:0,class:"alert alert-error"},$e={__name:"ProfileAdd",setup(Se){const $=Q(),k=R(),P=window.location.origin,i=W(""),d=X(),{displayName:m,tagline:v,description:f,links:w,loading:x,error:_,errorField:T,slug:C,addLink:u,removeLink:E,saveProfile:I}=Y(),M=l=>d.getLinkType(l).label,j=q(()=>d.otherLinkTypes),z=l=>d.shouldShowTitleInput(l),B=l=>d.getLinkPlaceholder(l),D=l=>{l.error=!1;const e=d.formatSocialUrl(l);e!==l.url&&(l.url=e)},F=()=>{i.value&&(u(i.value),i.value="")},A=async()=>{w.value.forEach(e=>{e.url&&(e.url=d.formatSocialUrl(e))}),await I()?(k.success("Perfil guardado correctamente"),$.push("/profiles")):k.error("Error al guardar el perfil")};return(l,e)=>{const G=O("router-link");return n(),r("div",ee,[e[19]||(e[19]=t("h1",{class:"text-2xl font-bold mb-6 text-center"},"Crear Nuevo Perfil",-1)),t("form",{onSubmit:K(A,["prevent"]),class:"space-y-6"},[t("div",te,[e[10]||(e[10]=t("label",{class:"label"},[t("span",{class:"label-text"},"Nombre público")],-1)),b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>h(m)?m.value=s:null),type:"text",placeholder:"Nombre público",class:y(["input input-bordered",{"input-error":o(T)==="displayName"}])},null,2),[[c,o(m)]]),o(T)==="displayName"?(n(),r("label",se,e[9]||(e[9]=[t("span",{class:"label-text-alt text-error"},"El nombre público es obligatorio",-1)]))):g("",!0)]),t("div",oe,[e[11]||(e[11]=t("label",{class:"label"},[t("span",{class:"label-text"},"Tagline")],-1)),b(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>h(v)?v.value=s:null),type:"text",placeholder:"Tagline",class:"input input-bordered"},null,512),[[c,o(v)]])]),t("div",le,[e[12]||(e[12]=t("label",{class:"label"},[t("span",{class:"label-text"},"Descripción")],-1)),b(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=s=>h(f)?f.value=s:null),rows:"4",placeholder:"Descripción",class:"textarea textarea-bordered"},null,512),[[c,o(f)]])]),t("div",re,[e[15]||(e[15]=t("h3",{class:"text-lg font-semibold mb-2"},"Links",-1)),(n(!0),r(S,null,U(o(w),(s,L)=>(n(),r("div",{key:L,class:"flex gap-2 items-center mb-2"},[z(s.type)?b((n(),r("input",{key:0,"onUpdate:modelValue":p=>s.title=p,placeholder:"Título del link",class:y(["input input-bordered flex-[1] max-w-[150px]",{"input-error":s.error}]),onInput:p=>s.error=!1},null,42,ne)),[[c,s.title]]):(n(),r("div",ae,a(M(s.type)),1)),b(t("input",{"onUpdate:modelValue":p=>s.url=p,placeholder:B(s.type),class:y(["input input-bordered flex-1",{"input-error":s.error}]),onInput:p=>D(s)},null,42,ie),[[c,s.url]]),t("button",{type:"button",class:"btn btn-circle btn-sm btn-error size-10",onClick:p=>o(E)(L),"aria-label":"Eliminar link"},e[13]||(e[13]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,de)]))),128)),t("div",ue,[t("button",{type:"button",onClick:e[3]||(e[3]=s=>o(u)("website")),class:"btn btn-primary btn-sm"}," + Sitio Web "),t("button",{type:"button",onClick:e[4]||(e[4]=s=>o(u)("instagram")),class:"btn btn-primary btn-sm bg-pink-400 border-pink-600 hover:bg-pink-500 hover:border-pink-600 hover:text-white"}," + Instagram "),t("button",{type:"button",onClick:e[5]||(e[5]=s=>o(u)("facebook")),class:"btn btn-primary btn-sm bg-blue-400 border-blue-600 hover:bg-blue-500 hover:border-blue-600 hover:text-white"}," + Facebook "),t("button",{type:"button",onClick:e[6]||(e[6]=s=>o(u)("whatsapp")),class:"btn btn-primary btn-sm bg-green-400 border-green-600 hover:bg-green-500 hover:border-green-600 hover:text-white"}," + WhatsApp "),t("button",{type:"button",onClick:e[7]||(e[7]=s=>o(u)("email")),class:"btn btn-primary btn-sm bg-gray-400 border-gray-600 hover:bg-gray-500 hover:border-gray-600 hover:text-white"}," + Email ")]),t("div",pe,[b(t("select",{"onUpdate:modelValue":e[8]||(e[8]=s=>i.value=s),class:"select select-bordered flex-1"},[e[14]||(e[14]=t("option",{value:""},"Otra red social...",-1)),(n(!0),r(S,null,U(j.value,s=>(n(),r("option",{key:s.value,value:s.value},a(s.label),9,be))),128))],512),[[H,i.value]]),t("button",{type:"button",onClick:F,class:"btn btn-primary",disabled:!i.value}," Agregar ",8,ce)])]),t("section",me,[e[16]||(e[16]=t("h3",{class:"text-lg font-semibold mb-2"},"Perfil público",-1)),t("div",ve,[t("div",fe,[t("div",xe,[t("h2",ge,a(o(m)),1),t("p",ye,a(o(v)||o(f)),1)]),t("div",he,[t("span",ke," /"+a(o(C)),1),t("div",we,[V(Z,{value:`${o(P)}/p/${o(C)}`,size:150},null,8,["value"])])])])])]),t("div",_e,[V(G,{to:"/profiles",class:"btn btn-default"},{default:J(()=>e[17]||(e[17]=[N(" Cancelar ",-1)])),_:1,__:[17]}),t("button",{type:"submit",class:"btn btn-primary",disabled:o(x)},[o(x)?(n(),r("span",Ce)):g("",!0),N(" "+a(o(x)?"Guardando...":"Guardar Perfil"),1)],8,Te)]),o(_)?(n(),r("div",Le,[e[18]||(e[18]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("span",null,a(o(_)),1)])):g("",!0)],32)])}}};export{$e as default};
